<!DOCTYPE html>
<html 
>
  <head>
  <meta charset="utf-8">
  <!-- ### DNS Prefetch ### -->
  <meta http-equiv="x-dns-prefetch-control" content="on">
<!-- busuanzi -->

<!-- comment -->






<!-- analytics -->






  <!-- ### Preload ### -->
  

  <!-- ### Meta & Title & Info ### -->
  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
<meta name="renderer" content="webkit">
<meta name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<!-- Title -->
<title>ECMAScript 之 ASI | 次世代 Hugo</title>
<!-- favicon -->
<!-- Favicons -->

<link rel="shortcut icon" type="image/ico" href="/favicon.ico">


<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">



<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">


<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ff2601">
<!-- Android Chrome Color -->

<meta name="format-detection" content="telephone=no">
<!-- Description -->
<meta name="description" content="ECMAScript 行尾要不要加 Semicolon 一直是很爭議的議題，傳統都會加上 ;，但最近則發現越來越多 Project 都不加，如 Vue、Redux … 等，到底 ASI 是什麼 ? 行尾不加 ; 會有什麼問題嗎 ?">
<!-- Keywords -->
<meta name="keywords" content=", ECMAScript">
<!-- Disable Fucking Bloody Baidu Tranformation -->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
  <!-- ### Import File ### -->
  
    <!-- spectre.css -->

<link rel="stylesheet" href="/lib/spectre/spectre.min.css">

<style>
body {
  background-color: #f8f9fa
}

a,
a:visited {
  color: #0070ff
}

a:active,
a:focus,
a:hover {
  color: #0070ff;
  opacity: .75;
}

.avatar {
  background: #444
}

.navbar-link,
.navbar-link:visited,
.timeline .timeline-item .timeline-icon.icon-lg {
  color: #0070ff
}

.navbar-link:hover {
  color: #0070ff;
  opacity: .8;
}

#search-input .btn,
#disqus_click_btn,
#disqus-switch-to-direct,
#disqus-loadmore-button {
  background: #727e96;
  border-color: #727e96;
  color: #fff;
}

#post-toc a.post-toc-link,
#post-toc a.post-toc-link:visited,
.share-menu.menu .menu-item > a {
  color: #727e96
}

.share-menu.menu .menu-item > a:hover,
.share-menu.menu .menu-item > a:focus,
.share-menu.menu .menu-item > a:visited {
  color: #50596c;
  background: #f8f9fa;
  opacity: .85;
}
</style>

<!-- style.css -->

<link rel="stylesheet" href="/css/style.min.css">


<!-- prism.css -->

    <!-- prism.line_number -->
    
        
            <link rel="stylesheet" href="/lib/prism/prism-line-numbers.min.css">
        
    
    <!-- prism.theme -->
    
        <link rel="stylesheet" href="/lib/prism/prism-darcula.min.css">
    




  
  <!-- ### Site Verification ### -->
  

  <!-- ### RSS ### -->
  

<link rel="alternate" type="application/atom+xml" href="/atom.xml">


  <!-- ### WebApp ### -->
  <meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="次世代 Hugo">
<meta name="msapplication-starturl" content="https://harumi.cc">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="次世代 Hugo">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Manifest Import -->

<link rel="manifest" href="/site.webmanifest">

<!-- Open Search -->

  <!-- ### The Open Graph & Twitter Card Protocol ### -->
  <meta property="og:title" content="ECMAScript 之 ASI | 次世代 Hugo">
<meta property="og:site_name" content="次世代 Hugo">

<meta property="og:url" content="https://harumi.cc/ecmascript/general/asi/">
<meta property="og:image"
	content="https://harumi.cc/apple-touch-icon.png">
<meta property="og:description" content="ECMAScript 行尾要不要加 Semicolon 一直是很爭議的議題，傳統都會加上 ;，但最近則發現越來越多 Project 都不加，如 Vue、Redux … 等，到底 ASI 是什麼 ? 行尾不加 ; 會有什麼問題嗎 ?">
<meta name="twitter:card" content="summary">

<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-04-24T00:01:17.000Z">
<meta property="article:modified_time" content="2020-04-24T00:01:17.000Z">
<meta property="article:author" content="Sam Xiao">
<meta property="og:article:tag" content=", ECMAScript">


  <!-- ### Analytics ### -->
  





  <!-- ### Canonical link ### -->
  <link rel="canonical" href="https://harumi.cc/ecmascript/general/asi/">
  <!-- ### Structured Data ### -->
  

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "https://harumi.cc/ecmascript/general/asi/",
    "@type": "BlogPosting",
    "logo": "https://harumi.cc/apple-touch-icon.png",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://harumi.cc/ecmascript/general/asi/"
    },
    "headline": "ECMAScript 之 ASI | 次世代 Hugo",
    
    "image": {
        "@type": "ImageObject",
        "url": "https://harumi.cc/apple-touch-icon.png"
    },
    
    "datePublished": "2020-04-24T00:01:17.000Z",
    "dateModified": "2025-09-20T14:34:22.958Z",
    "author": {
        "@type": "Person",
        "name": "Sam Xiao",
        "image": {
            "@type": "ImageObject",
            "url": "https://harumi.cc/img/default_avatar.png"
        },
        "description": "無駄を削ぎ、本質を研ぐ"
    },
    "publisher": {
        "@type": "Organization",
        "name": "次世代 Hugo",
        "logo": {
            "@type": "ImageObject",
            "url": "https://harumi.cc/apple-touch-icon.png"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https://harumi.cc/search?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": ", ECMAScript",
    "description": "ECMAScript 行尾要不要加 Semicolon 一直是很爭議的議題，傳統都會加上 ;，但最近則發現越來越多 Project 都不加，如 Vue、Redux … 等，到底 ASI 是什麼 ? 行尾不加 ; 會有什麼問題嗎 ?"
}
</script>

  <!-- ### Custom Head ### -->
  
<meta name="generator" content="Hexo 4.2.1"></head>
  <body>
  <header>
  <h1 class="header-title text-center">
    <a href="/">
      次世代 Hugo
    </a>
  </h1>
  <div class="text-center header-slogan">
    無駄を削ぎ、本質を研ぐ
  </div>
  <nav class="navbar-section text-center">
  <div class="columns">
    <div class="column col-1"></div>
    <div class="column col-10 col-sm-12 align-content-center">
      <a href="/" class="navbar-link">ホーム</a>
      <a href="/series/" class="navbar-link">シリーズ</a>
      <a href="/tags/" class="navbar-link">タグ</a>
      <a href="/search" class="navbar-link">検索</a>
    </div>
  </div>
</nav>
</header>
  
<!-- ## Post ## -->
<div class="post-container">
  <div id="post-card" class="card">
    <div class="card-item-container">
      <div class="card-inner-cell">
        <div class="card-header">
          
<h1 class="card-title h3 mb-2">ECMAScript 之 ASI</h1>


<div class="post-header-info">
	<img class="author-thumb lazyload" data-src="/img/default_avatar.png" src="/img/suka-lazyload.gif"
		alt="Sam Xiao's Avatar">
	<span>2020-04-24</span>
</div>

        </div>
        <div class="card-body">
          <article id="post-content">
            <p>ECMAScript 行尾要不要加 Semicolon 一直是很爭議的議題，傳統都會加上 <code>;</code>，但最近則發現越來越多 Project 都不加，如 Vue、Redux … 等，到底 ASI 是什麼 ? 行尾不加 <code>;</code> 會有什麼問題嗎 ?</p>
<a id="more"></a>

<h2 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h2><p>macOS Catalina 10.15.4<br>VS Code 1.44.2<br>Quokka 1.0.287<br>ECMAScript 2020</p>
<h2 id="ASI"><a href="#ASI" class="headerlink" title="ASI"></a>ASI</h2><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> 
    x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>若將 <code>x + y</code> 換行，結果會回傳 <code>undefined</code>。</p>
<p><img src="/images/ecmascript/general/asi/asi000.png" alt="asi000"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span><span class="token punctuation">;</span>
  x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>因為 ASI 會自動在 <code>return</code> 之後加上 <code>;</code>，因此回傳 <code>undefined</code>。</p>
<p><img src="/images/ecmascript/general/asi/asi001.png" alt="asi001"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> 
  <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'FP in JavaScript'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>若回傳 object literal 換行，結果也會回傳 <code>undefined</code>。</p>
<p><img src="/images/ecmascript/general/asi/asi003.png" alt="asi003"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span> 
  <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'FP in JavaScript'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>因為 ASI 會自動在 <code>return</code> 之後加上 <code>;</code>，因此回傳 <code>undefined</code>。</p>
<blockquote>
<p><strong>ASI</strong><br>Automatic Semicolon Insertion<br>ECMAScript 會自動在行尾加上 <code>;</code></p>
</blockquote>
<p><img src="/images/ecmascript/general/asi/asi003.png" alt="asi003"></p>
<h2 id="ASI-Exception"><a href="#ASI-Exception" class="headerlink" title="ASI Exception"></a>ASI Exception</h2><p>ASI 並不是在所有行尾都會加上 <code>;</code>，以下是例外：</p>
<h3 id="、-、-之中的行尾"><a href="#、-、-之中的行尾" class="headerlink" title="[]、{}、() 之中的行尾"></a>[]、{}、() 之中的行尾</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> 
    <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">3</span>
  <span class="token punctuation">]</span>

  <span class="token keyword">return</span> a
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>[]</code> 中行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi004.png" alt="asi004"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'FP in JavaScript'</span><span class="token punctuation">,</span>
    price<span class="token punctuation">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> o
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>{}</code> 中行尾不會有 ASI。</p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> 
  y<span class="token punctuation">,</span> 
  z
<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>()</code> 中行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi005.png" alt="asi005"></p>
<h3 id="行尾為-或"><a href="#行尾為-或" class="headerlink" title="行尾為 . 或 ,"></a>行尾為 . 或 ,</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> o <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> o<span class="token punctuation">.</span>
    price
<span class="token punctuation">}</span> 


<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span> price<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>行尾為 <code>.</code> 時不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi006.png" alt="asi006"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> 
      y <span class="token operator">=</span> <span class="token number">2</span>
  
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>行尾為 <code>,</code> 時不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi007.png" alt="asi007"></p>
<h3 id="結尾為-或-–"><a href="#結尾為-或-–" class="headerlink" title="結尾為 ++ 或 –"></a>結尾為 ++ 或 –</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token operator">++</span>
  x  
  <span class="token keyword">return</span> x
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>行尾為 <code>++</code> 時不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi008.png" alt="asi008"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token operator">--</span>
  x  
  <span class="token keyword">return</span> x
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>行尾為 <code>--</code> 時不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi009.png" alt="asi009"></p>
<h3 id="for-、while-、do、if-、else-之後沒-時"><a href="#for-、while-、do、if-、else-之後沒-時" class="headerlink" title="for()、while()、do、if()、else 之後沒 {} 時"></a>for()、while()、do、if()、else 之後沒 <code>{}</code> 時</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>for()</code> 內若只有一行可省略 <code>{}</code>，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi010.png" alt="asi010"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>while()</code> 內若只有一行可省略 <code>{}</code>，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi011.png" alt="asi011"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">do</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span> 
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
    
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>do()</code> 內若只有一行可省略 <code>{}</code>，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi012.png" alt="asi012"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token keyword">else</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>if()</code> 與 <code>else</code> 內若只有一行可省略 <code>{}</code>，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi013.png" alt="asi013"></p>
<h3 id="下一行為-、-、-、-、-、-、-、-時"><a href="#下一行為-、-、-、-、-、-、-、-時" class="headerlink" title="下一行為 [、(、+、-、*、/、,、. 時"></a>下一行為 <code>[</code>、<code>(</code>、<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>,</code>、<code>.</code> 時</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> 
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

  <span class="token keyword">return</span> a
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>[</code> 時，此時行尾不會有 ASI。 </p>
<p><img src="/images/ecmascript/general/asi/asi014.png" alt="asi014"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> 
    <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span>
    
  <span class="token keyword">return</span> a
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>(</code> 時，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi015.png" alt="asi015"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> x 
    <span class="token operator">+</span> y
    
  <span class="token keyword">return</span> a
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>+</code> 時，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi016.png" alt="asi016"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> x 
    <span class="token operator">*</span> y
    
  <span class="token keyword">return</span> a
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>*</code> 時，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi017.png" alt="asi017"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> x 
    <span class="token operator">/</span> y
    
  <span class="token keyword">return</span> a
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>/</code> 時，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi018.png" alt="asi018"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> o <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> o
    <span class="token punctuation">.</span>price
<span class="token punctuation">}</span> 

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span> price<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>.</code> 時，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi019.png" alt="asi019"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span>
     <span class="token punctuation">,</span>y <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下一行為 <code>,</code> 時，此時行尾不會有 ASI。</p>
<p><img src="/images/ecmascript/general/asi/asi020.png" alt="asi020"></p>
<h2 id="Must-Use-Semicolon"><a href="#Must-Use-Semicolon" class="headerlink" title="Must Use Semicolon"></a>Must Use Semicolon</h2><p>雖然有 ASI 讓我們減少使用 <code>;</code> 機會，但有些場合卻一定要使用 <code>;</code>。</p>
<h3 id="for"><a href="#for" class="headerlink" title="for()"></a>for()</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>for()</code> 內三個 expression 一定要用 <code>;</code> 隔開。</p>
<p><img src="/images/ecmascript/general/asi/asi021.png" alt="asi021"></p>
<h3 id="Multiple-Statement-x2F-Expression"><a href="#Multiple-Statement-x2F-Expression" class="headerlink" title="Multiple Statement &#x2F; Expression"></a>Multiple Statement &#x2F; Expression</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x<span class="token operator">++</span>
  <span class="token keyword">return</span> x
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>let x = 0</code> 與 <code>x++</code> 兩個 statement 或 expression 要寫在同一行時，一定要使用 <code>;</code> 隔開。</p>
<p><img src="/images/ecmascript/general/asi/asi022.png" alt="asi022"></p>
<h3 id="switch"><a href="#switch" class="headerlink" title="switch()"></a>switch()</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">switch</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span> result <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span> result <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span> result <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> result <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">4</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>case</code> 內的 statement 若與 <code>break</code> 要寫在同一行，要使用 <code>;</code> 隔開。</p>
<p><img src="/images/ecmascript/general/asi/asi023.png" alt="asi023"></p>
<h3 id="以-開頭"><a href="#以-開頭" class="headerlink" title="以 [ 開頭"></a>以 <code>[</code> 開頭</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>這是 ECMAScript 行尾不加 <code>;</code> 常遇到問題，因為之前提到 ASI exception 中，當下一行為 <code>[</code> 時不會加上 <code>;</code>，因此 <code>let i = 1</code> 與 <code>[1, 2, 3].map()</code> 視為同一行。</p>
<p><img src="/images/ecmascript/general/asi/asi024.png" alt="asi024"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>傳統在行尾都加上 <code>;</code> 一定沒問題。</p>
<p><img src="/images/ecmascript/general/asi/asi025.png" alt="asi025"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在行首加上 <code>;</code> 強制與上一行分開也行。</p>
<blockquote>
<p>若使用 ASI，這是少數 <code>;</code> 要加在行首例外</p>
</blockquote>
<p><img src="/images/ecmascript/general/asi/asi026.png" alt="asi026"></p>
<h3 id="以-Backtick-開頭"><a href="#以-Backtick-開頭" class="headerlink" title="以 Backtick 開頭"></a>以 Backtick 開頭</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">123</span>

<span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>這是 ECMAScript 行尾不加 <code>;</code> 常遇到問題，因為之前提到 ASI exception 中，當下一行為 <code>[</code> 時不會加上 <code>;</code>，因此 <code>let x = 123</code> 與 <code>${x}</code> 視為同一行。</p>
<p><img src="/images/ecmascript/general/asi/asi027.png" alt="asi027"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

<span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>傳統在行尾都加上 <code>;</code> 一定沒問題。</p>
<p><img src="/images/ecmascript/general/asi/asi028.png" alt="asi028"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">123</span>

<span class="token punctuation">;</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>在行首加上 <code>;</code> 強制與上一行分開也行。</p>
<blockquote>
<p>若使用 ASI，這是少數 <code>;</code> 要加在行首例外</p>
</blockquote>
<p><img src="/images/ecmascript/general/asi/asi029.png" alt="asi029"></p>
<h3 id="以-開頭-1"><a href="#以-開頭-1" class="headerlink" title="以 + 開頭"></a>以 <code>+</code> 開頭</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'123'</span>

<span class="token operator">+</span>x <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>這是 ECMAScript 行尾不加 <code>;</code> 常遇到問題，因為之前提到 ASI exception 中，當下一行為 <code>+</code> 時不會加上 <code>;</code>，因此 <code>let x = 123</code> 與 <code>+x</code> 視為同一行。</p>
<p><img src="/images/ecmascript/general/asi/asi030.png" alt="asi030"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>

<span class="token operator">+</span>x<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>傳統在行尾都加上 <code>;</code> 一定沒問題。</p>
<p><img src="/images/ecmascript/general/asi/asi031.png" alt="asi031"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'123'</span>

<span class="token punctuation">;</span><span class="token operator">+</span>x <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>在行首加上 <code>;</code> 強制與上一行分開也行。</p>
<blockquote>
<p>若使用 ASI，這是少數 <code>;</code> 要加在行首例外</p>
</blockquote>
<p><img src="/images/ecmascript/general/asi/asi032.png" alt="asi032"></p>
<h3 id="IIFE"><a href="#IIFE" class="headerlink" title="IIFE"></a>IIFE</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> inc <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> <span class="token number">1</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>這是 ECMAScript 行尾不加 <code>;</code> 常遇到問題，IIFE 會在新的一行使用 <code>()</code> 刮起來，最後使用 <code>()</code> 執行之，因為之前提到 ASI exception 中，當下一行為 <code>(</code> 時不會加上 <code>;</code>，因此 IIFE 與 <code>let inc = x =&gt; x + 1</code> 視為同一行。</p>
<p><img src="/images/ecmascript/general/asi/asi033.png" alt="asi033"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> inc <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>傳統在每行結尾都加上 <code>;</code> 一定沒問題。</p>
<p><img src="/images/ecmascript/general/asi/asi034.png" alt="asi034"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> inc <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> <span class="token number">1</span>

<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>只在 <code>(</code> 前加上 <code>;</code> 強制與上一行分開也行。</p>
<blockquote>
<p>若使用 ASI，這是少數 <code>;</code> 要加在行首例外</p>
</blockquote>
<p><img src="/images/ecmascript/general/asi/asi035.png" alt="asi035"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> inc <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> x <span class="token operator">+</span> <span class="token number">1</span>

<span class="token keyword">void</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>若你覺得 <code>;</code> 放在最前面很怪，也可以改用 <code>void</code> operator，它也會執行 IIFE，也不須再行首加 <code>;</code>。</p>
<p><img src="/images/ecmascript/general/asi/asi036.png" alt="asi036"></p>
<h2 id="Must-Not-Use-Semicolon"><a href="#Must-Not-Use-Semicolon" class="headerlink" title="Must Not Use Semicolon"></a>Must Not Use Semicolon</h2><p>有些場景剛好相反，一定不能使用 <code>;</code>。</p>
<h3 id="for-1"><a href="#for-1" class="headerlink" title="for()"></a>for()</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>for()</code> 在括號內最後一個 expression 之後不能加上 <code>;</code>。</p>
<p><img src="/images/ecmascript/general/asi/asi037.png" alt="asi037"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>for()</code> 內若只寫兩個 expression 之後加上 <code>;</code> 是合法的，因為其省略第三個 expression。</p>
<p><img src="/images/ecmascript/general/asi/asi038.png" alt="asi038"></p>
<h3 id="之後"><a href="#之後" class="headerlink" title="() 之後"></a>() 之後</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>()</code> 之後加上 <code>;</code> 於 syntax 合法，但邏輯是錯的。</p>
<p><img src="/images/ecmascript/general/asi/asi039.png" alt="asi039"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 <code>()</code> 之後加上 <code>;</code> 相當於分開兩個 statement。</p>
<p><img src="/images/ecmascript/general/asi/asi040.png" alt="asi040"></p>
<h2 id="May-Use-Semicolon"><a href="#May-Use-Semicolon" class="headerlink" title="May Use Semicolon"></a>May Use Semicolon</h2><p>有些場景 <code>;</code> 可加可不加，一般建議不加。</p>
<h3 id="之後-1"><a href="#之後-1" class="headerlink" title="{} 之後"></a>{} 之後</h3><pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Function declaration 使用 <code>{}</code> 時，在行尾 <code>;</code> 可加可不加，一般建議不加。</p>
<p><img src="/images/ecmascript/general/asi/asi041.png" alt="asi041"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

x <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>if</code> 使用 <code>{}</code> 時，在行尾 <code>;</code> 可加可不加，一般建議不加。</p>
<p><img src="/images/ecmascript/general/asi/asi042.png" alt="asi042"></p>
<pre class="line-numbers highlight language-javascript"><code class="language-javascript"><span class="token keyword">let</span> f <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">switch</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span> result <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> result <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">4</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ?</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>switch</code> 使用 <code>{}</code> 時，在行尾 <code>;</code> 可加可不加，一般建議不加。</p>
<p><img src="/images/ecmascript/general/asi/asi043.png" alt="asi043"></p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>看到以上這麼多規則可能都暈了，事實上只有兩條規則</p>
<ul>
<li>ECMAScript 行尾不用加 <code>;</code></li>
<li>一行以 <code>[</code>、<code>(</code>、<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>,</code>、<code>.</code> 、backtick 開頭，且與上一行無關時，則要在上一行 <code>行尾</code> 加上 <code>;</code>，或在本行 <code>行首</code> 加上 <code>;</code></li>
</ul>
<p>這個例外常出現在以下情況：</p>
<ul>
<li>以 <code>[]</code> array literal 開頭使用 Array.prototype 的 method，且與上一行無關時</li>
<li>以 backtick 開頭做 template string，且與上一行無關時</li>
<li>以 <code>+</code> 開頭將 String 轉 Number，且與上一行無關時</li>
<li>以 <code>()</code> 做 IIFE，且與上一行無關時</li>
</ul>
<p>其他幾乎就很少遇到例外，可安心使用 ASI。</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><ul>
<li>ECMAScript 並不是全部都在行尾加上 <code>;</code> 就了事，有些情況是不能加 <code>;</code></li>
<li>反對行尾不加 <code>;</code> 者多半以 <code>[]</code> 在一行開頭與 IIFE 例外為主要反對理由，實務上會遇到的例外大概只有 4 個</li>
<li>ECMAScript 本來就不完美，但若要因為少數例外而因噎廢食，放棄原本美意的 ASI 則相當可惜</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://eddychang.me/" target="_blank" rel="noopener">Eddy Chang</a>, <a href="https://eddychang.me/js-semicolon/" target="_blank" rel="noopener">JavaScript 裡的語句用分號結尾是個選項嗎 ?</a><br><a href="http://dr-axel.de/" target="_blank" rel="noopener">Dr. Axel Rauschmayer</a>, <a href="http://speakingjs.com/es5/ch07.html" target="_blank" rel="noopener">Speaking JavaScript</a></p>

          </article>
          <p class="post-footer-info mb-0 pt-2">
  
  
  <span class="post-tags-list mt-2">
    
    
    <a class="post-tags-list-item" href='/tags/ECMAScript/'>#&nbsp;ECMAScript</a>
    
  </span>
  
</p>
        </div>
        <div class="post-nav px-2 bg-gray">
	<ul class="pagination">
		<!-- Prev Nav -->
		
		<li class="page-item page-prev">
			<a href="/ecmascript/promise/nested-promise/">
				<div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div>
				<div class="page-item-subtitle">如何正確處理 Nested Promise ?</div>
			</a>
		</li>
		
		<!-- Next Nav -->
		
		<li class="page-item page-next">
			<a href="/webstorm/general/browser-popup/">
				<div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div>
				<div class="page-item-subtitle">如何不顯示 Browser Popup ?</div>
			</a>
		</li>
		
	</ul>
</div>
      </div>
    </div>
  </div>
</div>


  <footer class="text-center">
  <p class="footer-copyright mb-0">Copyright&nbsp;©&nbsp;<span data-year></span>
    <a href="mailto:oomusou@gmail.com" class="footer-copyright-a" href="https://harumi.cc">次世代 Hugo</a>
  </p>
</footer>

  <!-- ### Footer JS Import ### -->
<script>
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 50
  };

  /* Copyright */
  var copyrightNow = new Date().getFullYear();
  var copyrightContent = document.querySelector('span[data-year]')
  copyrightSince = 2015;
  copyrightContent.textContent = copyrightSince + ' - ' + copyrightNow;
</script>
<!-- vanilla-lazyload -->

<script src="/lib/vanilla-lazyload/lazyload.min.js" async></script>




<!-- gallery.js -->

<!-- Comment -->

<!-- ### Custom Footer ### -->

  </body>
</html>